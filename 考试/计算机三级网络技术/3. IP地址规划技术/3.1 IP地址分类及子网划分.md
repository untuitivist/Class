
## 1. 标准分类的IP地址

+ 常用的A类、B类、C类采用包括"网络号-主机号"的两级的层次结构
$$IP地址 ::= \{<网络号>, <主机号>\}$$
+ IPv4的**地址长度是32bit**, 用**点分十进制**表示, 如x.x.x.x的格式. 其中**每个x为8bit**, 取值范围(00000000-11111111), 对应的十进制取值范围是(0-255).

1. 机器中存放的IP地址是32位二进制代码: 10000000000010110000001100011111
2. 每隔8位插入一个空格能够提高可读性: {10000000} {00001011} {00000011} {00011111}
3. 将每8位的二进制数转换为十进制数: 128 11 3 31
4. 采用点分十进制记法则更加便于使用: 128.11.3.31
![[Pasted image 20230906185220.png]]

每个网络中"全0"和"全1"的主机号的地址有特殊用途, 所以是需要去除的
所以每个网络内可分配的最大主机数 = $2^{主机号位数}-2$ ^1

| 地址类型 | 主机地址范围 | 可分配的网络数 | 每个网络内可分配的最大主机数 |
|:-:|:-:|:-:|:-:|
| A类 | 1.0.0.0~127.255.255.255 | $2^{7}=128$ | $2^{24}-2=16777214$|
| B类 | 128.0.0.0~191.255.255.255 | $2^{14}=16384$ | $2^{16}-2=65534$ |
| C类 | 192.0.0.0~223.255.255.255 | $2^{21}=2097152$ | $2^{8}-2=254$ |


## 2. 特殊地址形式

特殊的IP地址包括: 受限广播地址、直接广播地址、"这个网络上的特定主机"地址与回送地址

1. 受限广播地址
	受限广播地址又称有限广播地址, 该地址形式唯一, 即: **32位全为1的IP地址(255.255.255.255)**. 此地址用来将一个分组以广播方式发送给本网络中的所有主机(本网内成员向全网广播).
2. 直接广播地址
	**直接广播地址的形式是一个有效的网络号和一个全的主机号**, 用来使路由器将一个来自其他网络的分组以广播方式发送给特定网络上的所有主机.
	**在IP地址计算中: 直接广播地址是IP地址网络号不变, 主机号全为1的地址.**
3. "这个网络上的特定主机"地址(主机号)
	"这个网络上的特定主机"地址用于同一网络内部某个主机或某个路由器向另一个主机发送分组. **"这个网络上的特定主机"地址的形式为一个全o的网络号和一个确定的主机号.**
	**在IP地址计算中: 主机号是IP地址网络号全为0, 主机号不变的地址.**
4. 回送地址
	A类IP地址中的127.0.0.0是一个保留地址, 它即回送地址. 用于网络软件测试和本地进程间通信使用.

## 3. 子网掩码

### 3.1 地址结构

+ 常用的A类、B类、C类IP地址采用包括"网络号-主机号"的两级的层次结构
$$IP地址 ::= \{<网络号>, <主机号>\}$$
+ 子网采用网络号子网号主机号的三层IP地址结构
$$IP地址 ::= \{<网络号>, <子网号>, <主机号>\}$$
+ 从主机号借用若干个位作为子网号subnet-id, 而主机号host-id也就相应减少了若干个位

### 3.2 概念

+ 子网掩码主要是用来区分IP地址中的网络号(网络号+子网号)和主机号的
+ 子网掩码的结构与形式跟IP地址一样, 也由32位的二进制数组成 , 用点分十进制法表示
+ 子网掩码与IP地址的对应关系是, **IP地址中网络号所在的位对应的子网掩码中的相应位为1, IP地址中主机号所在的位对应的子网掩码中的相应位为0**
+ **注意: IP地址中网络号和主机号是由子网掩码来确定的, 子网掩码二进制表示中全为1则对应IP地址位段的是网络号, 全为0则对应IP地址位段的是主机号**

![[Pasted image 20230909155758.png]]

![[Pasted image 20230909155916.png]]
$$网络号 = 子网掩码\wedge IP地址$$

补充内容∶
	子网内第一个可用的IP地址:
		**子网内第一个可用的IP地址是子网号(网络地址)后的第一个地址**, 例如网络地址为194.55.128.0, 则子网内第一个可用的IP地址为194.55.128.1
	子网内最后一个可用的IP地址:
		**子网内最后一个可用的IP地址是直接广播地址前一个地址**, 例如直接广播地址为194.55.191.255, 则子网内最后一个可用的IP地址为194.55.191.254
	
	
	
题:
$$\begin{array}{|c|c|}\hline\text{IP地址}&125.176.21.9\\\hline\text{子网掩码}&255.224.0.0\\\hline\text{地址类别}&[1]\\\hline\text{网络地址}&[2]\\\hline\text{直接广播地址}&[3]\\\hline\text{主机号}&[4]\\\hline\text{子网内的第一个可用IP地址}&[5]\\\hline\end{array}$$

1. 地址类别: 
	看IP地址第一段: A=1-127, B=128-191,C=192-223
	
	为 A类地址
	
2. 网络地址: 
	网络地址是IP地址网络号不变, 主机号全为0的地址
	IP地址中网络号所在的位对应的子网掩码中的相应位为0
	
	IP地址 =  125.176.21.9             = 01111101.101 *10000.00010101.00001001*
	子网掩码 = 255.224.0.0            = 11111111.111 *00000.00000000.00000000*
	网络地址 = 子网掩码 $\wedge$ IP地址 = 01111101.101 *00000.00000000.00000000*
	
	为 125.160.0.0
	
3. 直接广播地址: 
	直接广播地址是IP地址网络号不变, 主机号全为1的地址
	IP地址中网络号所在的位对应的子网掩码中的相应位为1
	
	子网掩码        = *11111111.111* 00000.00000000.00000000 网络位为前11位
	$IP$地址           = *01111101.101* 10000.00010101.00001001
	直接广播地址 = *01111101.101* 11111.11111111.11111111
	
	为 125.191.255.255
	
4. 主机号:
	IP地址中主机号所在的位对应的子网掩码中的相应位为0
	
	子网掩码 = 11111111.111 *00000.00000000.00000000* 主机位为后21位
	$IP$地址    = 01111101.101 *10000.00010101.00001001*
	主机号     = 00000000.000 *10000.00010101.00001001*
	
	为 0.16.21.9
	
5. 子网内第一个可用的IP地址:
	子网内第一个可用的IP地址是子网号(网络地址)后的第一个地址
	
	网络地址 = 125.160.0.0
	
	为 125.160.0.1
	
	PS: 子网内最后一个可用的IP地址是直接广播地址前一个地址, 125.191.255.254


## 4. 子网划分


1. 判断客户需求的网络数与主机数
2. 配置满足需求的基本网络地址结构
3. 配置地址掩码
4. 配置网络地址
5. 配置网络广播地址
6. 配置网络的主机地址

### 4.1 规划子网地址的基本步骤

+ 确定要划分的子网数
+ 求出子网数目对应二进制数的位数N以及主机数目对应二进制数的位数M
+ 在该IP地址的原子网掩码基础上, 将其主机地址部分的前N位置取1和后M位置取0, 即得出该IP地址划分子网后的子网掩码

### 4.2 规划子网地址的基本思想

+ 熟记2的幂∶ 1, 2, 4, 8, 16, 32, 64, 128, 256
+ 通过划分子网可以将一个网络划分成若干个小网络以满足内部不同部门的需要, 而从外部来看仍然像一个网络一样. 划分子网既优化了网络性能又提高了网络管理的效率.

### 4.3 划分子网的基本方法

+ 你选择的子网掩码将会产生多少个子网: $2^N-2$(N代表网络位借用主机的位数)
+ 每个子网能有多少主机: $2^M-2$(M代表主机位)
+ 每个子网的网络地址: 主机位全为0
+ 每个子网的广播地址: 主机位全为1

